<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===== META & SEO ===== -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Zenith Roofing Services â€“ San Diego & Temecula Roof Experts</title>
  <meta name="description" content="Licensed roofing contractor serving Escondido, San Diego & Temecula. Roof repair, replacement, tile, shingles, TPO, torch down, silicone coatings & gutters.">

  <!-- Preload critical resources -->
  <link rel="preload" href="css/base.css" as="style">
  <link rel="preload" href="css/header.css" as="style">
  <link rel="preload" href="css/hero.css" as="style">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "RoofingContractor",
    "name": "Zenith Roofing Services, Inc.",
    "image": "https://zenithroofingca.com/images/badges/logo-zenith-icon.png",
    "telephone": "+1-858-900-6163",
    "areaServed": ["Escondido CA","San Diego CA","Temecula CA","North County San Diego"],
    "url": "https://zenithroofingca.com/",
    "address": { "@type": "PostalAddress", "addressRegion": "CA", "addressCountry": "US" },
    "license": "C-39 #1036112",
    "sameAs": [
      "https://www.yelp.com/biz/zenith-roofing-services-escondido",
      "https://www.angi.com/companylist/us/ca/escondido/zenith-roofing-services-inc-reviews-1.htm"
    ]
  }
  </script>

  <!-- Critical CSS -->
  <style>
    /* Base reset */
    body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    
    /* Header fixes */
    .header { position: fixed; top: 0; left: 0; width: 100%; z-index: 5000; }
    main { padding-top: var(--header-h); }
    
    /* Smooth hover effects */
    .nav-links a, .nav-item, .menu-toggle {
      transition: all 0.25s ease-out;
      will-change: transform, color;
    }
    .nav-links a:hover, .nav-item:hover {
      color: #2c7be5;
      transform: translateY(-2px);
    }
    
    /* Video and nav fixes */
    .zenith-video-container, .zenith-background-video, .zenith-video-overlay { 
      pointer-events: none; 
      z-index: 0; 
    }
    .nav-bar, .nav-links, .nav-links li, .nav-links a { 
      overflow: visible; 
    }
    
    /* Layout defaults */
    :root { --header-h: 80px; }
  </style>

  <!-- Non-critical CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"></noscript>
  
  <!-- Main CSS files -->
  <link rel="stylesheet" href="css/base.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/header.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/header-mobile.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/hero.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/about.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/why-choose.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/trust.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/photo.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/testimonial.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/cta.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/service-areas.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/real-estate.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/footer.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/responsive.css" media="print" onload="this.media='all'">
  
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" media="print" onload="this.media='all'">

  <!-- reCAPTCHA -->
  <script>
    (function() {
      window.renderHeroRecaptchaIfReady = function() {
        var slot = document.getElementById('recaptcha-slot');
        if (!slot) return;
        if (window.grecaptcha && !slot.dataset.rendered) {
          window._recaptchaWidgetId = grecaptcha.render(slot, {
            sitekey: '6LclaJ4rAAAAAEMe8ppXrEJvIgLeFVxgmkq4DBrI',
            theme: 'light',
            size: 'normal'
          });
          slot.dataset.rendered = '1';
        }
      };
      window.recaptchaOnload = function() {
        window.renderHeroRecaptchaIfReady();
      };
    })();
  </script>
</head>
<body>
  <!-- Single header inclusion -->
  <header data-include="components/header-section.html"></header>

  <main>
    <section data-include="components/hero-section.html"></section>
    <section data-include="components/about-section.html"></section>
    <section data-include="components/why-choose-section.html"></section>
    <section data-include="components/trust-section.html"></section>
    <section data-include="components/photo-section.html"></section>
    <section data-include="components/testimonial-section.html"></section>
    <section data-include="components/cta-section.html"></section>
    <section data-include="components/service-areas.html"></section>
    <section data-include="components/real-estate.html"></section>
  </main>

  <footer data-include="components/footer.html"></footer>

  <!-- Scripts -->
  <script src="https://www.google.com/recaptcha/api.js?onload=recaptchaOnload&render=explicit" async defer></script>
  
  <!-- Combined scripts -->
  <script src="js/header-mobile.js" defer></script>
  <script src="js/header.js" defer></script>
  <script src="js/hero.js" defer></script>
  <script src="js/about.js" defer></script>
  <script src="js/why-choose.js" defer></script>
  <script src="js/trust.js" defer></script>
  <script src="js/photo.js" defer></script>
  <script src="js/cta.js" defer></script>
  <script src="js/service-areas.js" defer></script>
  <script src="js/real-estate.js" defer></script>
  <script src="js/footer.js" defer></script>
  
  <!-- Swiper -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" defer></script>
  <script src="js/testimonial.js" defer></script>

  <!-- Optimized loader -->
  <script>
    (function() {
      // Async include loader
      async function include(el) {
        const src = el.getAttribute('data-include');
        if (!src) return;
        try {
          const res = await fetch(src, { cache: 'no-cache' });
          if (!res.ok) throw new Error('Failed to load ' + src);
          el.outerHTML = await res.text();
        } catch (e) {
          console.error('Include error:', src, e);
        }
      }

      async function init() {
        await Promise.all(
          Array.from(document.querySelectorAll('[data-include]')).map(include)
        
        // Initialize components
        [
          'renderHeroRecaptchaIfReady',
          'initEstimateForm',
          'initAboutSection',
          'initWhyChoose',
          'initTrustSection',
          'initPhotoSection',
          'initTestimonials',
          'initCTA',
          'initServiceAreas',
          'initRealEstate',
          'initFooter',
          'initHeader',
          'initHeaderMobile',
          'setLayoutFlags'
        ].forEach(fn => window[fn]?.());
      }

      // Layout handler
      window.setLayoutFlags = function() {
        const toggle = document.querySelector('.menu-toggle');
        const collapsed = toggle && getComputedStyle(toggle).display !== 'none';
        document.documentElement.classList.toggle('nav-collapsed', collapsed);
        
        const header = document.querySelector(collapsed ? '.mobile-header' : '.header');
        if (header) {
          const h = Math.round(header.getBoundingClientRect().height);
          document.documentElement.style.setProperty('--header-h', `${h}px`);
        }
      };

      // Event setup
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
      
      window.addEventListener('load', window.setLayoutFlags);
      window.addEventListener('resize', window.setLayoutFlags);
      document.addEventListener('click', (e) => {
        if (e.target.closest('.menu-toggle')) {
          setTimeout(window.setLayoutFlags, 50);
        }
      });
    })();
  </script>
</body>
</html>
