<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===== META & SEO ===== -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Zenith Roofing Services – San Diego & Temecula Roof Experts</title>
  <meta name="description" content="Licensed roofing contractor serving Escondido, San Diego & Temecula. Roof repair, replacement, tile, shingles, TPO, torch down, silicone coatings & gutters.">

  <!-- ===== Preload critical CSS ===== -->
  <link rel="preload" href="css/base.css" as="style">
  <link rel="preload" href="css/header.css" as="style">
  <link rel="preload" href="css/hero.css" as="style">

  <!-- ===== LCP image preload ===== -->
<!-- With this (after you export the smaller WebP files) -->
<!-- Preload matches the actual hero PNG -->
<link rel="preload" as="image"
      href="/images/modern-tile-roof.png"
      imagesizes="100vw">


  <!-- (Optional) Preload the hero partial you inject -->
  <link rel="preload" as="fetch" href="components/hero-section.html" crossorigin="anonymous">

  <!-- ===== Google Fonts (non-blocking) ===== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Load the stylesheet without blocking render -->
  <link rel="preload"
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
        as="style"
        onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap">
  </noscript>

  <!-- ===== Structured data ===== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "RoofingContractor",
    "name": "Zenith Roofing Services, Inc.",
    "image": "https://zenithroofingca.com/images/badges/logo-zenith-icon.png",
    "telephone": "+1-858-900-6163",
    "areaServed": ["Escondido CA","San Diego CA","Temecula CA","North County San Diego"],
    "url": "https://zenithroofingca.com/",
    "address": { "@type": "PostalAddress", "addressRegion": "CA", "addressCountry": "US" },
    "license": "C-39 #1036112",
    "sameAs": [
      "https://www.yelp.com/biz/zenith-roofing-services-escondido",
      "https://www.angi.com/companylist/us/ca/escondido/zenith-roofing-services-inc-reviews-1.htm"
    ]
  }
  </script>

  <!-- ===== Critical CSS (tiny; stabilizes layout & scroll) ===== -->
  <style>
    body{ margin:0; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .header{ position:relative; z-index:5000; }
    a,button,.hover-effect{ transition:all .3s ease; }
    a:hover,button:hover,.hover-effect:hover{ opacity:.9; transform:translateY(-1px); }

    :root{ --header-h:80px; }
    .zenith-hero{ min-height:100svh; min-height:100dvh; }

    /* Reserve hero space while the partial loads */
    [data-include="components/hero-section.html"]{
      display:block; min-height:100svh; min-height:100dvh;
    }

    /* Zero font-swap shift above the fold */
    .zenith-hero, .zenith-card, .zenith-header-text, #estimate-form{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    html{ scroll-behavior:smooth; scroll-padding-top:var(--header-h,80px); }
    [id]{ scroll-margin-top:calc(var(--header-h,80px) + 12px); }
  </style>

  <!-- ===== Load critical CSS normally (preloaded above) ===== -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/hero.css">

  <!-- ===== Non-critical CSS (async) ===== -->
  <link rel="stylesheet" href="css/about.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/why-choose.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/trust.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/photo.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/testimonial.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/cta.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/service-areas.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/real-estate.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/footer.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="css/responsive.css" media="print" onload="this.media='all'">

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" media="print" onload="this.media='all'">
</head>

<body>
  <!-- Header include FIRST so it's present for measurements -->
  <section data-include="components/header-section.html"></section>

  <!-- ===== MAIN (partials auto-injected below) ===== -->
  <main>
    <section data-include="components/hero-section.html"></section>
    <section data-include="components/about-section.html"></section>
    <section data-include="components/why-choose-section.html"></section>
    <section data-include="components/trust-section.html"></section>
    <section data-include="components/photo-section.html"></section>
    <section data-include="components/testimonial-section.html"></section>
    <section data-include="components/cta-section.html"></section>
    <section data-include="components/service-areas.html"></section>
    <section data-include="components/real-estate.html"></section>
    <section data-include="components/footer.html"></section>
  </main>

  <!-- ===== JS (all defer) ===== -->
  <script src="js/header.js" defer></script>
  <script src="js/hero.js" defer></script>
  <script src="js/about.js" defer></script>
  <script src="js/why-choose.js" defer></script>
  <script src="js/trust.js" defer></script>
  <script src="js/photo.js" defer></script>
  <script src="js/cta.js" defer></script>
  <script src="js/service-areas.js" defer></script>
  <script src="js/real-estate.js" defer></script>
  <script src="js/footer.js" defer></script>

  <!-- Swiper + testimonials init -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" defer></script>
  <script src="js/testimonial.js" defer></script>

  <!-- Optimized include loader -->
  <script>
    (function() {
      async function include(el) {
        const src = el.getAttribute('data-include');
        if (!src) return;
        try {
          const res = await fetch(src, { cache: 'no-cache' });
          if (!res.ok) throw new Error('Failed to load ' + src);
          const html = await res.text();
          el.outerHTML = html;
        } catch (e) {
          console.error('❌ Include error:', src, e);
        }
      }

      async function init() {
        const includes = Array.from(document.querySelectorAll('[data-include]'));
        await Promise.all(includes.map(include));

        if (window.initMobileMenu) window.initMobileMenu();

        const initFns = [
          'initEstimateForm',
          'initAboutSection',
          'initWhyChoose',
          'initTrustSection',
          'initPhotoSection',
          'initTestimonials',
          'initCTA',
          'initServiceAreas',
          'initRealEstate',
          'initFooter',
          'initHeader',
          'setLayoutFlags'
        ];
        initFns.forEach(n => { if (typeof window[n] === 'function') window[n](); });
      }

      // Layout flags (used for sticky-header offset & CLS)
      window.setLayoutFlags = function() {
        var toggle = document.querySelector('.menu-toggle');
        var collapsed = toggle && getComputedStyle(toggle).display !== 'none';
        document.documentElement.classList.toggle('nav-collapsed', collapsed);

        var headerEl = collapsed
          ? document.querySelector('.mobile-header')
          : document.querySelector('.header');
        var h = headerEl ? Math.round(headerEl.getBoundingClientRect().height) : 0;
        document.documentElement.style.setProperty('--header-h', h + 'px');
      };

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }

      window.addEventListener('load', window.setLayoutFlags);
      window.addEventListener('resize', window.setLayoutFlags);
      document.addEventListener('click', function(e) {
        if (e.target.closest('.menu-toggle')) setTimeout(window.setLayoutFlags, 50);
      });

      window.addEventListener('orientationchange', window.setLayoutFlags, { passive: true });
      if (window.visualViewport) {
        visualViewport.addEventListener('resize', window.setLayoutFlags, { passive: true });
        visualViewport.addEventListener('scroll', window.setLayoutFlags, { passive: true });
      }
    })();
  </script>

  <!-- Smooth scroll with header offset (fallback) -->
  <script>
    (function(){
      var root = document.documentElement;
      function headerHeight(){
        var h = parseInt(getComputedStyle(root).getPropertyValue('--header-h')) || 80;
        return h + 8;
      }
      function scrollToHash(hash, replace){
        var id = (hash || '').slice(1);
        if(!id) return;
        var el = document.getElementById(id);
        if(!el) return;
        var y = el.getBoundingClientRect().top + window.pageYOffset - headerHeight();
        window.scrollTo({ top: y, behavior: 'smooth' });
        if(replace) { try { history.replaceState(null, '', '#' + id); } catch(_){} }
      }
      document.addEventListener('click', function(e){
        var a = e.target.closest('a[href^="#"]');
        if(!a) return;
        var href = a.getAttribute('href');
        if(href === '#' || href.length < 2) return;
        if(document.getElementById(href.slice(1))){
          e.preventDefault();
          scrollToHash(href, true);
        }
      });
      window.addEventListener('load', function(){
        if(location.hash){
          setTimeout(function(){ scrollToHash(location.hash, false); }, 0);
        }
      });
    })();
  </script>
</body>
</html>
