@@ -196,117 +196,115 @@
  background-image:
    linear-gradient(#fff,#fff),
    url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 7l5 6 5-6' fill='none' stroke='%231a2740' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat, no-repeat;
  background-position:left top, right 12px center;
  background-size:100% 100%, 18px 18px;
}

/* ---------------------------------------------------------
   [4.3] CITY / STATE / ZIP alignment
   --------------------------------------------------------- */
.city-field, .state-field, .zip-field{min-width:0}
@media (min-width:720px){
  .city-field{grid-column:1 / span 1}
  .state-field{grid-column:2 / span .5}
  .zip-field{grid-column:2 / span 1; justify-self:end; width:100%}
}

/* ---------------------------------------------------------
   [4.4] FILE UPLOAD â€” flawless UX
   --------------------------------------------------------- */
.file-group{gap:8px}
.file-group > label{
  display:block; font-size:.9rem; color:var(--zenith-navy); margin-bottom:6px;
}
.file-input-wrapper{
  display:flex; align-items:center; gap:12px; flex-wrap:wrap;
}
.file-input-wrapper input[type="file"]{
  /* hide native but keep it accessible for SR/keyboard */
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
.file-group input[type="file"]{
  display:block;
  width:100%;
  padding:12px 14px;
  font-size:.9rem;
  color:var(--zenith-navy);
  border:1px dashed var(--zenith-border);
  border-radius:var(--radius-sm);
  background:var(--zenith-light-gray);
}
.custom-file-upload{
  display:inline-flex; align-items:center; justify-content:center;
.file-group input[type="file"]::file-selector-button{
  margin-right:12px;
  padding:12px 16px;
  background:var(--zenith-navy); color:#fff;
  border-radius:999px; border:1px solid rgba(255,255,255,.08);
  font-weight:600; cursor:pointer; user-select:none;
  border:0;
  border-radius:999px;
  background:var(--zenith-navy);
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:transform var(--speed), background var(--speed);
}
.custom-file-upload:hover{background:#0a396e}
.custom-file-upload:active{transform:translateY(1px)}
.custom-file-upload:focus-visible{outline:none; box-shadow:var(--focus)}

.file-name{
  min-width:220px; max-width:100%;
  padding:12px 14px;
  background:#fff; border:1px dashed var(--zenith-border);
  border-radius:999px; color:var(--zenith-muted);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.file-group input[type="file"]::file-selector-button:hover{background:#0a396e}
.file-group input[type="file"]::file-selector-button:active{transform:translateY(1px)}
.file-group input[type="file"]::file-selector-button:focus-visible{outline:none; box-shadow:var(--focus)}

/* ---------------------------------------------------------
   [5] ACTIONS: reCAPTCHA + SUBMIT
   --------------------------------------------------------- */
.zenith-actions{
  display:grid; gap:var(--gap);
  grid-template-columns:1fr auto;
  align-items:center;
  padding-top:8px;
}
.zenith-recaptcha{
  display:flex; flex-direction:column; gap:6px;
}
.recaptcha-title{
  font-size:.9rem; color:var(--zenith-navy);
}
.g-recaptcha{transform-origin:left top}

.zenith-submit{
  display:inline-flex; align-items:center; gap:10px;
  border:0; border-radius:12px;
  padding:14px 20px;
  background:linear-gradient(180deg, var(--zenith-orange), var(--zenith-orange-dark));
  color:#fff; font-weight:800; letter-spacing:.2px;
  cursor:pointer; transition:filter var(--speed), transform var(--speed), box-shadow var(--speed);
  box-shadow:0 10px 20px rgba(247,148,29,.3);
}
.zenith-submit:hover{filter:brightness(1.02)}
.zenith-submit:active{transform:translateY(1px)}
.submit-icon{display:inline-block; transform:translateY(-1px)}
.zenith-submit[disabled]{opacity:.6; cursor:not-allowed; box-shadow:none}

/* ---------------------------------------------------------
   [6] DISCLAIMER
   --------------------------------------------------------- */
.zenith-disclaimer{
  grid-column:1 / -1;
  margin-top:4px;
  font-size:.9rem; color:var(--zenith-muted);
  background:linear-gradient(0deg,#fff, #fff), linear-gradient(90deg,#fff0,#fff0);
  border-top:1px solid var(--zenith-border);
  padding-top:14px;
}
.zenith-disclaimer a{color:var(--zenith-orange); text-decoration:none}
.zenith-disclaimer a:hover{text-decoration:underline}
.zenith-contact{margin-top:6px}
.zenith-phone{font-weight:700; color:var(--zenith-navy); text-transform:uppercase}
.zenith-phone strong{color:var(--zenith-navy)}

/* ---------------------------------------------------------
   [7] ACCESSIBILITY / STATES
   --------------------------------------------------------- */
:where(input,textarea,select):focus-visible{outline:none; box-shadow:var(--focus)}
.has-error{border-color:#d92d20 !important; box-shadow:0 0 0 3px rgba(217,45,32,.15) !important}
.error-msg{margin-top:6px; color:#d92d20; font-size:.85rem}

/* ---------------------------------------------------------
   [8] RESPONSIVE
   --------------------------------------------------------- */
@media (max-width: 820px){
  .zenith-form-grid{grid-template-columns:1fr}
  .zenith-actions{grid-template-columns:1fr}
  .zenith-submit{justify-content:center}
  .file-name{min-width:160px}
  .zenith-logo-frame{width:64px; height:64px}
  .zenith-luxury-logo{width:40px; height:40px}
}
js/hero.js
+7
-28

// ====================================================================
// js/hero.js â€” Form polish, file UX, basic validation, reCAPTCHA hook
// ====================================================================

// ðŸ‘‰ put your real site key here (v2 checkbox)
const RECAPTCHA_SITE_KEY = "6LclaJ4rAAAAAEMe8ppXrEJvIgLeFVxgmkq4DBrI"; // replace if different

(function () {
  let recaptchaWidgetId = null;
  const state = { bound: false };

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("estimate-form");
    if (!form || state.bound) return;
    state.bound = true;

    const first = document.getElementById("first-name");
    const last = document.getElementById("last-name");
    const display = document.getElementById("display-name");
    const phone = document.getElementById("phone");
    const zip = document.getElementById("zip");
    const fileInput = document.getElementById("photos");
    const fileName = form.querySelector(".file-name");
    const fileButton = form.querySelector(".custom-file-upload");

    // ---------- Build display-name automatically ----------
    const updateDisplayName = () => {
      const f = (first?.value || "").trim();
      const l = (last?.value || "").trim();
      display && (display.value = [f, l].filter(Boolean).join(" "));
    };
    first && first.addEventListener("input", updateDisplayName);
    last && last.addEventListener("input", updateDisplayName);

    // ---------- Phone formatter (858-900-6163) ----------
    if (phone) {
      phone.addEventListener("input", () => {
        const digits = phone.value.replace(/\D/g, "").slice(0, 10);
        const parts = [];
        if (digits.length > 0) parts.push(digits.slice(0, 3));
        if (digits.length > 3) parts.push(digits.slice(3, 6));
        if (digits.length > 6) parts.push(digits.slice(6, 10));
        phone.value = parts.join("-");
      });
    }

    // ---------- ZIP numeric guard ----------
    if (zip) {
      zip.addEventListener("input", () => {
        const cleaned = zip.value.replace(/[^\d-]/g, "").slice(0, 10);
        zip.value = cleaned;
      });
    }

    // ---------- File input UX ----------
    if (fileInput && fileName && fileButton) {
      fileButton.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          fileInput.click();
        }
      });

      fileInput.addEventListener("change", () => {
        if (!fileInput.files || fileInput.files.length === 0) {
          fileName.textContent = "No files selected";
          return;
        }
        const names = Array.from(fileInput.files).map(f => f.name);
        // If many files, show count + first file
        fileName.textContent = names.length > 3
          ? `${names.length} files selected (${names[0]} â€¦)`
          : names.join(", ");
      });
    }

    // ---------- Client-side validation helper ----------
    const requireFields = [
      "#first-name", "#last-name", "#phone", "#email",
      "#service", "#street", "#city", "#state", "#zip"
    ];
    const markError = (el, hasError) => {
      const group = el.closest(".zenith-input-group, .select-group");
      if (!group) return;
      if (hasError) group.classList.add("has-error");
      else group.classList.remove("has-error");
    };

    form.addEventListener("submit", (e) => {
      // donâ€™t block native form post if all good
      let hasAnyError = false;
      requireFields.forEach(sel => {
        const el = form.querySelector(sel);
        if (!el) return;
        const val = (el.value || "").trim();
        const missing = val.length === 0 || (el.id === "service" && !el.value);
        markError(el, missing);
        hasAnyError ||= missing;
      });

@@ -113,40 +89,43 @@ const RECAPTCHA_SITE_KEY = "6LclaJ4rAAAAAEMe8ppXrEJvIgLeFVxgmkq4DBrI"; // replac
          hasAnyError = true;
          alert("Please complete the security verification.");
        }
      }

      if (hasAnyError) {
        e.preventDefault();
        // scroll to first error
        const firstErr = form.querySelector(".has-error");
        if (firstErr) {
          firstErr.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        return;
      }

      // Optional: add a light disabled state
      const submitBtn = form.querySelector(".zenith-submit");
      if (submitBtn) {
        submitBtn.setAttribute("disabled", "true");
        submitBtn.style.filter = "saturate(.9) brightness(.95)";
      }
    });
  });

  // ---------- reCAPTCHA explicit render hook ----------
  // Keep this exactly named to match your <script â€¦ onload=recaptchaOnload>
  window.recaptchaOnload = function () {
  function renderHeroRecaptchaIfReady() {
    try {
      const target = document.getElementById("estimate-recaptcha");
      if (!target || typeof grecaptcha === "undefined") return;
      if (!target || typeof grecaptcha === "undefined" || recaptchaWidgetId !== null) return;
      recaptchaWidgetId = grecaptcha.render(target, {
        sitekey: RECAPTCHA_SITE_KEY,
        theme: "light",
        size: "normal"
      });
    } catch (_) {
      // silently ignore
    }
  };
  }

  window.renderHeroRecaptchaIfReady = renderHeroRecaptchaIfReady;
  // Keep this exactly named to match your <script â€¦ onload=recaptchaOnload>
  window.recaptchaOnload = renderHeroRecaptchaIfReady;
})();
